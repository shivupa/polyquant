file(GLOB_RECURSE _HDRS "*.hpp")
file(GLOB_RECURSE _SRCS "*.[hc]pp")
add_library(integral ${_HDRS} ${_SRCS})

if(xtensor_FOUND)
  target_link_libraries(integral xtensor xtensor::optimize xtensor::use_xsimd)
endif(xtensor_FOUND)
if(PETSC_FOUND)
  include_directories(${PETSC_INCLUDES})
  target_link_libraries(integral ${PETSC_LIBRARIES})
endif(PETSC_FOUND)
if(SLEPC_FOUND)
  include_directories(${SLEPC_INC})
  target_link_libraries(integral ${SLEPC_LIB})
endif(SLEPC_FOUND)
if(Libint2_FOUND)
  target_link_libraries(integral Libint2::cxx)
endif(Libint2_FOUND)
if(Eigen3_FOUND)
  target_link_libraries(integral Eigen3::Eigen)
endif(Eigen3_FOUND)

target_link_libraries(integral io basis)
target_include_directories(integral PUBLIC include)
install(TARGETS integral DESTINATION lib)
install(FILES ${_HDRS} DESTINATION include/integral)
